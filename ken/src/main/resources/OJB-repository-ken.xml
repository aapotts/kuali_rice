<?xml version="1.0" encoding="UTF-8"?>
<descriptor-repository version="1.0" isolation-level="repeatable-read">
  <!-- Connection descriptor -->
  <jdbc-connection-descriptor jcd-alias="kenDataSource" default-connection="false" jdbc-level="3.0" eager-release="false" batch-mode="false"
		useAutoCommit="0" ignoreAutoCommitExceptions="false">
		<sequence-manager className="org.kuali.rice.ojb.ConfigurableSequenceManager">
			<attribute attribute-name="property.prefix" attribute-value="datasource.ojb.sequenceManager" />
		</sequence-manager>
		<object-cache class="org.apache.ojb.broker.cache.ObjectCachePerBrokerImpl" />
	</jdbc-connection-descriptor>

  <!-- Class/table mappings -->
  <!-- NOTIFICATIONS -->
  <class-descriptor class="org.kuali.notification.bo.Notification" table="NOTIFICATIONS">
    <field-descriptor name="id" column="ID" jdbc-type="BIGINT" primarykey="true" autoincrement="true" sequence-name="NOTIFICATIONS_SEQ" />
    <field-descriptor name="deliveryType" column="DELIVERY_TYPE" jdbc-type="VARCHAR" nullable="false" />
    <field-descriptor name="creationDateTime" column="CREATED_DATETIME" jdbc-type="TIMESTAMP" nullable="false" />
    <field-descriptor name="sendDateTime" column="SEND_DATETIME" jdbc-type="TIMESTAMP" nullable="true" />
    <field-descriptor name="autoRemoveDateTime" column="AUTO_REMOVE_DATETIME" jdbc-type="TIMESTAMP" nullable="true" />
    <field-descriptor name="title" column="TITLE" jdbc-type="VARCHAR" nullable="true" />
    <field-descriptor name="content" column="CONTENT" jdbc-type="CLOB" nullable="false" />
    <field-descriptor name="processingFlag" column="PROCESSING_FLAG" jdbc-type="VARCHAR" nullable="false" />
    <field-descriptor name="lockedDate" column="LOCKED_DATE" jdbc-type="TIMESTAMP" indexed="false" nullable="true"/>
    <field-descriptor name="lockVerNbr" column="DB_LOCK_VER_NBR" jdbc-type="INTEGER" locking="true"/>

    <!-- Anonymous keys - our foreign keys -->
    <field-descriptor name="producerId" column="PRODUCER_ID" jdbc-type="BIGINT" access="anonymous" indexed="true" nullable="false" />
    <field-descriptor name="contentTypeId" column="CONTENT_TYPE_ID" jdbc-type="BIGINT" access="anonymous" indexed="true" nullable="false" />
    <field-descriptor name="notificationChannelId" column="NOTIFICATION_CHANNEL_ID" jdbc-type="BIGINT" access="anonymous" indexed="true" nullable="false" />
    <field-descriptor name="priorityId" column="PRIORITY_ID" jdbc-type="BIGINT" access="anonymous" indexed="true" nullable="false" />
    
    <!-- Object references -->
    <reference-descriptor name="priority" class-ref="org.kuali.notification.bo.NotificationPriority" auto-retrieve="true" auto-update="false" auto-delete="false">
        <foreignkey field-ref="priorityId" />
    </reference-descriptor>
    <reference-descriptor name="contentType" class-ref="org.kuali.notification.bo.NotificationContentType" auto-retrieve="true" auto-update="false" auto-delete="false">
        <foreignkey field-ref="contentTypeId" />
    </reference-descriptor>
    <reference-descriptor name="channel" class-ref="org.kuali.notification.bo.NotificationChannel" auto-retrieve="true" auto-update="false" auto-delete="false">
        <foreignkey field-ref="notificationChannelId" />
    </reference-descriptor>
    <reference-descriptor name="producer" class-ref="org.kuali.notification.bo.NotificationProducer" auto-retrieve="true" auto-update="false" auto-delete="false">
        <foreignkey field-ref="producerId" />
    </reference-descriptor>
    
    <!-- List references -->
    <collection-descriptor name="recipients" element-class-ref="org.kuali.notification.bo.NotificationRecipient" auto-retrieve="true" auto-update="object" auto-delete="object">
        <orderby name="id" sort="ASC" />
        <inverse-foreignkey field-ref="notificationId" />
    </collection-descriptor>
    <collection-descriptor name="senders" element-class-ref="org.kuali.notification.bo.NotificationSender" auto-retrieve="true" auto-update="object" auto-delete="object">
        <orderby name="id" sort="ASC" />
        <inverse-foreignkey field-ref="notificationId" />
    </collection-descriptor>
  </class-descriptor>
  
  <!-- NOTIFICATION_CHANNELS -->
  <class-descriptor class="org.kuali.notification.bo.NotificationChannel" table="NOTIFICATION_CHANNELS">
    <field-descriptor name="id" column="ID" jdbc-type="BIGINT" primarykey="true" indexed="true" autoincrement="true" sequence-name="NOTIFICATION_CHANNELS_SEQ" />
    <field-descriptor name="name" column="NAME" jdbc-type="VARCHAR" indexed="true" nullable="false" />
    <field-descriptor name="description" column="DESCRIPTION" jdbc-type="VARCHAR" nullable="false" />
    <field-descriptor name="subscribable" column="SUBSCRIBABLE" conversion="org.kuali.notification.util.OjbCharBooleanConversion" jdbc-type="CHAR" nullable="false" />
    
    <!-- List references -->
    <!-- This class uses the specified collection descriptor b/c it is an M:N mapping -->
    <!-- Deletes must be done directly on the join object -->
    <collection-descriptor name="producers" element-class-ref="org.kuali.notification.bo.NotificationProducer" 
        auto-retrieve="true" auto-update="true" auto-delete="false" indirection-table="NOTIFICATION_CHANNEL_PRODUCERS"
        collection-class="org.apache.ojb.broker.util.collections.ManageableArrayList">
        <orderby name="id" sort="ASC" />
        <fk-pointing-to-this-class column="CHANNEL_ID"/>
        <fk-pointing-to-element-class column="PRODUCER_ID"/>
    </collection-descriptor>
    <collection-descriptor name="recipientLists" element-class-ref="org.kuali.notification.bo.NotificationRecipientList" auto-retrieve="true" auto-update="object" auto-delete="object">
        <orderby name="id" sort="ASC" />
        <inverse-foreignkey field-ref="channelId" />
    </collection-descriptor>
    <collection-descriptor name="reviewers" element-class-ref="org.kuali.notification.bo.NotificationChannelReviewer" auto-retrieve="true" auto-update="object" auto-delete="object">
        <orderby name="id" sort="ASC" />
        <inverse-foreignkey field-ref="channelId" />
    </collection-descriptor>
    <collection-descriptor name="subscriptions" element-class-ref="org.kuali.notification.bo.UserChannelSubscription" auto-retrieve="true" auto-update="object" auto-delete="object">
        <orderby name="id" sort="ASC" />
        <inverse-foreignkey field-ref="channelId" />
    </collection-descriptor>
  </class-descriptor>
  
  <!-- NOTIFICATION_CONTENT_TYPES -->
  <class-descriptor class="org.kuali.notification.bo.NotificationContentType" table="NOTIFICATION_CONTENT_TYPES">
    <field-descriptor name="id" column="ID" jdbc-type="BIGINT" primarykey="true" autoincrement="true" sequence-name="NOTIFICATION_CONTENT_TYPES_SEQ" />
    <field-descriptor name="name" column="NAME" jdbc-type="VARCHAR" indexed="true" nullable="false" />
    <field-descriptor name="description" column="DESCRIPTION" jdbc-type="VARCHAR" nullable="false" />
    <field-descriptor name="namespace" column="NAMESPACE" jdbc-type="VARCHAR" nullable="false" />
    <field-descriptor name="xsd" column="XSD" jdbc-type="VARCHAR" nullable="false" />
    <field-descriptor name="xsl" column="XSL" jdbc-type="VARCHAR" nullable="false" />
  </class-descriptor>
  
  <!-- NOTIFICATION_PRIORITIES -->
  <class-descriptor class="org.kuali.notification.bo.NotificationPriority" table="NOTIFICATION_PRIORITIES">
    <field-descriptor name="id" column="ID" jdbc-type="BIGINT" primarykey="true" autoincrement="true" sequence-name="NOTIFICATION_PRIORITIES_SEQ" />
    <field-descriptor name="name" column="NAME" jdbc-type="VARCHAR" indexed="true" nullable="false" />
    <field-descriptor name="description" column="DESCRIPTION" jdbc-type="VARCHAR" nullable="false" />
    <field-descriptor name="order" column="PRIORITY_ORDER" jdbc-type="INTEGER" nullable="false" />
  </class-descriptor>
  
  <!-- NOTIFICATION_PRODUCERS -->
  <class-descriptor class="org.kuali.notification.bo.NotificationProducer" table="NOTIFICATION_PRODUCERS">
    <field-descriptor name="id" column="ID" jdbc-type="BIGINT" primarykey="true" autoincrement="true" sequence-name="NOTIFICATION_PRODUCERS_SEQ" />
    <field-descriptor name="name" column="NAME" jdbc-type="VARCHAR" indexed="true" nullable="false" />
    <field-descriptor name="description" column="DESCRIPTION" jdbc-type="VARCHAR" nullable="false" />
    <field-descriptor name="contactInfo" column="CONTACT_INFO" jdbc-type="VARCHAR" nullable="false" />
    
    <!-- List references -->
    <!-- This class uses the specified collection descriptor b/c it is an M:N mapping -->
    <!-- Deletes must be done directly on the join object -->
    <collection-descriptor name="channels" element-class-ref="org.kuali.notification.bo.NotificationChannel" 
        auto-retrieve="true" auto-update="true" auto-delete="false" indirection-table="NOTIFICATION_CHANNEL_PRODUCERS"
        collection-class="org.apache.ojb.broker.util.collections.ManageableArrayList">
        <orderby name="id" sort="ASC" />
        <fk-pointing-to-this-class column="PRODUCER_ID"/>
        <fk-pointing-to-element-class column="CHANNEL_ID"/>
    </collection-descriptor>
  </class-descriptor>
  
  <!-- NOTIFICATION_REVIEWERS  -->
  <class-descriptor class="org.kuali.notification.bo.NotificationChannelReviewer" table="NOTIFICATION_REVIEWERS">
    <field-descriptor name="id" column="ID" jdbc-type="BIGINT" primarykey="true" autoincrement="true" sequence-name="NOTIFICATION_REVIEWERS_SEQ" />
    <field-descriptor name="reviewerId" column="REVIEWER_ID" jdbc-type="VARCHAR" indexed="true" nullable="false" />
    <field-descriptor name="reviewerType" column="REVIEWER_TYPE" jdbc-type="VARCHAR" indexed="true" nullable="false" />
    
    <field-descriptor name="channelId" column="CHANNEL_ID" jdbc-type="BIGINT" access="anonymous" indexed="true" nullable="false" />
    <reference-descriptor name="channel" class-ref="org.kuali.notification.bo.NotificationChannel" auto-retrieve="true" auto-update="false" auto-delete="false">
        <foreignkey field-ref="channelId" />
    </reference-descriptor>
  </class-descriptor>
  
  <!-- NOTIFICATION_RECIPIENTS -->
  <class-descriptor class="org.kuali.notification.bo.NotificationRecipient" table="NOTIFICATION_RECIPIENTS">
    <field-descriptor name="id" column="ID" jdbc-type="BIGINT" primarykey="true" autoincrement="true" sequence-name="NOTIFICATION_RECIPIENTS_SEQ" />
    <field-descriptor name="notificationId" column="NOTIFICATION_ID" jdbc-type="BIGINT" indexed="true" nullable="false" />
    <field-descriptor name="recipientId" column="RECIPIENT_ID" jdbc-type="VARCHAR" indexed="true" nullable="false" />
    <field-descriptor name="recipientType" column="RECIPIENT_TYPE" jdbc-type="VARCHAR" indexed="true" nullable="false" />
  </class-descriptor>
  
  <!-- NOTIFICATION_RECIPIENTS_LISTS -->
  <class-descriptor class="org.kuali.notification.bo.NotificationRecipientList" table="NOTIFICATION_RECIPIENTS_LISTS">
    <field-descriptor name="id" column="ID" jdbc-type="BIGINT" primarykey="true" autoincrement="true" sequence-name="NOTIFICATION_RECIPS_LISTS_SEQ" />
    <field-descriptor name="recipientId" column="RECIPIENT_ID" jdbc-type="VARCHAR" indexed="true" nullable="false" />
    <field-descriptor name="recipientType" column="RECIPIENT_TYPE" jdbc-type="VARCHAR" indexed="true" nullable="false" />
    
    <!-- Anonymous keys - our foreign keys -->
    <field-descriptor name="channelId" column="CHANNEL_ID" jdbc-type="BIGINT" access="anonymous" indexed="true" nullable="false" />
    
    <!-- Object references -->
    <reference-descriptor name="channel" class-ref="org.kuali.notification.bo.NotificationChannel" auto-retrieve="true" auto-update="false" auto-delete="false">
        <foreignkey field-ref="channelId" />
    </reference-descriptor>
  </class-descriptor>
  
  <!-- NOTIFICATION_SENDERS -->
  <class-descriptor class="org.kuali.notification.bo.NotificationSender" table="NOTIFICATION_SENDERS">
    <field-descriptor name="id" column="ID" jdbc-type="BIGINT" primarykey="true" autoincrement="true" sequence-name="NOTIFICATION_SENDERS_SEQ" />
    <field-descriptor name="notificationId" column="NOTIFICATION_ID" jdbc-type="BIGINT" indexed="true" nullable="false" />
    <field-descriptor name="senderName" column="NAME" jdbc-type="VARCHAR" indexed="true" nullable="false" />
  </class-descriptor>
  
  <!-- RECIPIENT_PREFERENCES -->
  <class-descriptor class="org.kuali.notification.bo.RecipientPreference" table="RECIPIENT_PREFERENCES">
    <field-descriptor name="id" column="ID" jdbc-type="BIGINT" primarykey="true" autoincrement="true" sequence-name="RECIPIENT_PREFERENCES_SEQ" />
    <field-descriptor name="recipientId" column="RECIPIENT_ID" jdbc-type="VARCHAR" indexed="true" nullable="false" />
    <field-descriptor name="recipientType" column="RECIPIENT_TYPE" jdbc-type="VARCHAR" indexed="true" nullable="false" />
    <field-descriptor name="property" column="PROPERTY" jdbc-type="VARCHAR" indexed="true" nullable="false" />
    <field-descriptor name="value" column="VALUE" jdbc-type="VARCHAR" nullable="false" />
  </class-descriptor>
  
  <!-- USER_CHANNEL_SUBSCRIPTIONS -->
  <class-descriptor class="org.kuali.notification.bo.UserChannelSubscription" table="USER_CHANNEL_SUBSCRIPTIONS">
    <field-descriptor name="id" column="ID" jdbc-type="BIGINT" primarykey="true" autoincrement="true" sequence-name="USER_CHANNEL_SUBSCRIPTIONS_SEQ" />
    <field-descriptor name="userId" column="USER_ID" jdbc-type="VARCHAR" indexed="true" nullable="false" />
  
    <!-- Anonymous keys - our foreign keys -->
    <field-descriptor name="channelId" column="CHANNEL_ID" jdbc-type="BIGINT" access="anonymous" indexed="true" nullable="false" />
    
    <!-- Object references -->
    <reference-descriptor name="channel" class-ref="org.kuali.notification.bo.NotificationChannel" auto-retrieve="true" auto-update="false" auto-delete="false">
        <foreignkey field-ref="channelId" />
    </reference-descriptor>
  </class-descriptor>
  
  <!-- NOTIFICATION_MESSAGE_DELIVERIES -->
  <class-descriptor class="org.kuali.notification.bo.NotificationMessageDelivery" table="NOTIFICATION_MSG_DELIVS">
    <field-descriptor name="id" column="ID" jdbc-type="BIGINT" primarykey="true" autoincrement="true" sequence-name="NOTIFICATION_MSG_DELIVS_SEQ" />
    <field-descriptor name="messageDeliveryStatus" column="MESSAGE_DELIVERY_STATUS" jdbc-type="VARCHAR" indexed="false" nullable="false" />
    <field-descriptor name="messageDeliveryTypeName" column="MESSAGE_DELIVERY_TYPE_NAME" jdbc-type="VARCHAR" indexed="true" nullable="false" />
    <field-descriptor name="userRecipientId" column="USER_RECIPIENT_ID" jdbc-type="VARCHAR" indexed="true" nullable="false" />
    <field-descriptor name="deliverySystemId" column="DELIVERY_SYSTEM_ID" jdbc-type="VARCHAR" indexed="false" nullable="true" />
    <field-descriptor name="lockedDate" column="LOCKED_DATE" jdbc-type="TIMESTAMP" indexed="false" nullable="true"/>
    <field-descriptor name="lockVerNbr" column="DB_LOCK_VER_NBR" jdbc-type="INTEGER" locking="true"/>

    <!-- Anonymous keys - our foreign keys -->
    <field-descriptor name="notificationId" column="NOTIFICATION_ID" jdbc-type="BIGINT" access="anonymous" indexed="true" nullable="false" />
    
    <!-- Object references -->
    <reference-descriptor name="notification" class-ref="org.kuali.notification.bo.Notification" auto-retrieve="true" auto-update="false" auto-delete="false">
        <foreignkey field-ref="notificationId" />
    </reference-descriptor>
  </class-descriptor>
  
  <!-- USER_DELIVERER_CONFIG -->
  <class-descriptor class="org.kuali.notification.bo.UserDelivererConfig" table="USER_DELIVERER_CONFIG">
    <field-descriptor name="id" column="ID" jdbc-type="BIGINT" primarykey="true" autoincrement="true" sequence-name="USER_DELIVERER_CONFIG_SEQ" />
    <field-descriptor name="userId" column="USER_ID" jdbc-type="VARCHAR" indexed="true" nullable="false" />
    <field-descriptor name="delivererName" column="DELIVERER_NAME" jdbc-type="VARCHAR" indexed="true" nullable="false" />
    
    <!-- Anonymous keys - our foreign keys -->
    <field-descriptor name="channelId" column="CHANNEL_ID" jdbc-type="BIGINT" access="anonymous" indexed="true" nullable="false" />
    
    <!-- Object references -->
    <reference-descriptor name="channel" class-ref="org.kuali.notification.bo.NotificationChannel" auto-retrieve="true" auto-update="false" auto-delete="false">
        <foreignkey field-ref="channelId" />
    </reference-descriptor>
  </class-descriptor>
</descriptor-repository>